angular.module("heroicVentures.localStore",[]).provider("$localStorage",[function(){"use strict";function e(){if(a=[],arguments.length>0)for(var e=0,t=arguments.length;t>e;i++)a.push(arguments[e]);return a}function t(){n=null;for(var e=0,t=a.length;t>e;i++){var r=a[e];if(r&&"function"==typeof r.canUse&&r.canUse()){n=r;break}}return n}var r=this;r.setStorageServicesByPriority=e,r.findHighestUsefulStorageService=t;var n,a=[];r.$get=["$window",function(e){function t(){r()&&(f=e.localStorage)}function r(){var t,r="hv.fakeKey.asdfghjlkasdfghjlasdfghjkasdfghjklasdfghjklweqryuiozxcvnm",n="hv.fakeValue";try{t="localStorage"in e;var a=e.localStorage;t=t&&null!=a,a.setItem(r,n),t=null!=a.getItem(r),a.removeItem(r)}catch(i){t=!1}return t}function n(){return f.length}function a(e){return f.key(e)}function i(e){return f.removeItem(e)}function u(){f.clear()}function o(e,t,r){var n=null!=r?new Date(r):null,a=new c(t,n);return a.isValid()?(f.setItem(e,a.toStorageObject()),t):null}function l(e){var t=f.getItem(e);if(t){var r=JSON.parse(t);if(!c.isLSItemWrapper(r))return r;var n=new c(r.value,r.expiresOn);if(n.isValid())return r.value;g.removeItem(e)}return null}function c(e,t){function r(){return JSON.stringify(i)}function n(){t instanceof Date&&(i.expiresOn=t.toISOString())}function a(){var e=Date.parse(i.expiresOn);return e?e>=new Date:!0}var i=this;n(),i.value=e,i.$$lsi=!0,i.toStorageObject=r,i.isValid=a}function s(e){return e.$$lsi}var f,g={setItem:o,getItem:l,clear:u,removeItem:i,key:a,length:n,canUse:r};return t(),c.isLSItemWrapper=s,g}]}]);